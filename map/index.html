<!DOCTYPE html>
<html>
<head>
	<title>WingoMaps - Google Map Demo, AngularJS Experiment</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta charset="utf-8" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link rel="stylesheet" href="../bootstrap/css/bootstrap.css" type="text/css">
<script src="../bootstrap/js/bootstrap.js" type="text/javascript"></script>

<link rel="stylesheet" href="style.css" type="text/css">
<script src="../jt_/jt2_.js" type="text/javascript"></script>

<script src="application.js" type="text/javascript"></script>

<script type="text/javascript">

var mapWingo = {

	resizeWin: function(event, isInit) {
		var scrnW = jt_.winW();
		var scrnH = jt_.winH();
		var ctrlH = jt_.height(mapWingo.wingo_ctrls_elm);
		if ( isInit || (scrnW != mapWingo.winCurrW) || (scrnH != mapWingo.winCurrH) || (ctrlH != mapWingo._ctrlH_) ) {
			mapWingo.winCurrW = scrnW;
			mapWingo.winCurrH = scrnH;
			mapWingo._ctrlH_ = ctrlH;
			var mapPos = jt_.getOffsetXY(mapWingo.mapFrame_elm);
			mapWingo.mapFrame_elm.style.top = jt_.valPx(ctrlH);
			mapWingo.mapFrame_elm.style.height = jt_.valPx(jt_.winH() - ctrlH);
			jt_.showNoneElm(mapWingo.crosshairDIV, true);
			jt_.moveTo(mapWingo.crosshairDIV, Math.round(jt_.width(mapWingo.mapFrame_elm)/2) - 8, ctrlH + Math.round(jt_.height(mapWingo.mapFrame_elm)/2) - 8);
		}
	},

	latLngUpdate: function(lng, lat) {
		mapWingo.fldLng.value = lng.toFixed(5);
		mapWingo.fldLat.value = lat.toFixed(5);
	},

	zoom_changed: function(zVal) {
		jt_.fo.setSelectVal(mapWingo.zoomPD, zVal);
	},

	init: function(wingoMapFrame) {
		mapWingo.wingoMapFrame = wingoMapFrame; // 'WingoMap' passed to parent from iFrame

		mapWingo.wingo_ctrls_elm = document.getElementById("wingo_ctrls");
		mapWingo.mapFrame_elm = document.getElementById("mapFrame");
		mapWingo.crosshairDIV = document.getElementById("myCrosshair");
		mapWingo.errMSG = document.getElementById("err");
		mapWingo.fldAddr = document.getElementById("address");
		mapWingo.fldLng = document.getElementById("long");
		mapWingo.fldLat = document.getElementById("lat");
		mapWingo.zoomPD = document.getElementById("zoomLevel");

		jt_.addListener(document.getElementById("btn_Menu"), 'click', showView);

		jt_.addListener(mapWingo.zoomPD, 'change', function() {
			mapWingo.wingoMapFrame.map.setZoom(parseInt(jt_.fo.selected(mapWingo.zoomPD)));
		});

		jt_.addListener(document.getElementById("btnGoTo"), 'click', function() {
			mapWingo.fldAddr.value = "";
			mapWingo.wingoMapFrame.panTo(mapWingo.fldLat.value, mapWingo.fldLng.value);
		});

		mapWingo.resizeWin(true, true);
		wingoMapFrame.initMap(37.443330303736026, -122.16418147087097, 10); // Center the map on Palo Alto
		jt_.addListener(window, 'resize', mapWingo.resizeWin);

		mapWingo.polyPD = document.getElementById("polyShape");
		mapWingo.markerDescFld = document.getElementById("markerDesc");

		initAppViews();
	}
};

function plotLongLat(lng, lat, zoomLevel, mapType) {
	mapWingo.wingoMapFrame.plotLongLat(lng, lat, zoomLevel, mapType);
}

</script>

</head>
<body>

<iframe src="map.html" id="mapFrame" scrolling="no"></iframe>

<img width="17" height="17" src="../images/icons/crosshair.gif" id="myCrosshair">


<div id="wingo_ctrls">

	<a href="../index.html" target="_top" class="wingo_logo">WingoMap</a>

	<div class="btn-group">
		<button class="btn btn-primary dropdown-toggle" data-toggle="dropdown" id="btn_Menu">
			Menu
			<span class="caret"></span>
		</button>
		<ul class="dropdown-menu">
			<li><a href="" onClick="showView('AddressLU');return false;">Address</a></li>
			<li><a href="" onClick="showView('Markers');return false;">Markers</a></li>
			<li><a href="" onClick="showView('Routes');return false;">Routes</a></li>
			<li><a href="" onClick="showView('Polygons');return false;">Polygons</a></li>
			<li><a href="" onClick="showView('Bookmarks');return false;">Bookmarks</a></li>
			<li><a href="" onClick="showView('LatLon');return false;">Latitude/Longitude</a></li>
		</ul>
	</div>

	<div class="clearfix"></div>
</div>

<div class="panelWingoMap" id="panelLatLon">
	<a href="" onClick="showView(); return false;" style="float:right;">close<i class="icon-remove"></i></a>
	<b>Latitude/Longitude</b>

	<button id="btnGoTo" class="btn btn-primary">go</button>

	<div class="latLonZ">
		lat:
		<input type="text" name="lat" id="lat"><br>

		lon:
		<input type="text" name="long" id="long"><br>

		zoom:
		<select id="zoomLevel">
			<option>0</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
			<option>10</option>
			<option>11</option>
			<option>12</option>
			<option>13</option>
			<option>14</option>
			<option>15</option>
			<option>16</option>
			<option>17</option>
		</select>
	</div>

</div>

<div class="panelWingoMap" id="panelAddressLU">
	<a href="" onClick="showView(); return false;" style="float:right;">close<i class="icon-remove"></i></a>
	<b>Address</b>

	<p>Enter U.S. street address: <span id="err" style="color:red"></span><br />
		<input type="text" name="address" id="address"><br />
		<button class="btn btn-primary" id="useAddr" onClick="mapWingo.wingoMapFrame.plotAddr()">Map Address</button>
	</p>
</div>


<div class="panelWingoMap" id="panelMarkers">
	<a href="" onClick="showView(); return false;" style="float:right;">close<i class="icon-remove"></i></a>
	<b>Markers:</b>

	<p>Description: <a href="javascript:WingoMap.clearMarkerTxt()">clear</a><br />
		<textarea name="markerDesc" id="markerDesc" rows="4" wrap="virtual"></textarea>
	</p>

	<p align="center">
		<button class="btn btn-primary" id="markerButton" onClick="createMarkerBtn()">Create Marker</button>
		<button id="markerCancelButton" onClick="setMarkerButton(-1)" style="display:none;">Cancel</button>
	</p>

	<p style="text-align:center"><i>Position map to place at crosshair</i></p>

	<div class="hLinePad"></div>

	<div id="markerList"></div>
</div>


<div class="panelWingoMap" id="panelRoutes">
	<a href="" onClick="showView(); return false;" style="float:right;">close<i class="icon-remove"></i></a>
	<b>Routes:</b>

	<p><img src="../images/working.gif" width="67" height="67" alt="" />
	in progress...</p>

	<div class="hLinePad"></div>

	<div id="routeList"></div>
</div>


<div class="panelWingoMap" id="panelPolygons">
	<a href="" onClick="showView(); return false;" style="float:right;">close<i class="icon-remove"></i></a>
	<b>Polygons:</b>

<table border="0" cellspacing="0" cellpadding="0" align="center">
<tr>
	<td align="right">Shape:</td>
	<td>
		<select name="polyShape" id="polyShape" onChange="setPolyButton(polyEditIdx)">
			<option value="36">Circle</option>
			<option value="4">Square</option>
			<option value="3">Triangle</option>
			<option value="5">Pentagon</option>
			<option value="6">Hexagon</option>
			<option value="7">Heptagon</option>
			<option value="8">Octagon</option>
			<option value="9">Nonagon</option>
			<option value="10">Decagon</option>
		</select>
	</td>
</tr>
<tr>
	<td align="right">Radius:</td>
	<td><input type="text" name="polyRadius" id="polyRadius" value="1" class="polyInput" /> <i>(in miles)</i></td>
</tr>
<tr>
	<td align="right">Line Color:</td>
	<td><input type="text" name="polyColor" id="polyColor" value="0000ff" class="polyInput" /> <i>(hex)</i></td>
</tr>
<tr>
	<td align="right">Line Width:</td>
	<td><input type="text" name="polyWidth" id="polyWidth" value="2" class="polyInput" /> <i>(pixels)</i></td>
</tr>
<tr>
	<td align="right">Line Transparency:</td>
	<td><input type="text" name="polyTransparency" id="polyTransparency" value="0.5" class="polyInput" /> <i>(0..1)</i></td>
</tr>
</table>

	<p style="text-align:center">
		<button class="btn btn-primary" id="polyButton" onClick="createPolyBtn()">Create Circle</button>
		<button id="polyCancelButton" onClick="setPolyButton(-1)" style="display:none;">Cancel</button>
	</p>
	<p style="text-align:center"><i>Position map to place at crosshair</i></p>

	<div class="hLinePad"></div>

	<div id="polyList"></div>
</div>


<div class="panelWingoMap" id="panelBookmarks">
	<a href="" onClick="showView(); return false;" style="float:right;">close<i class="icon-remove"></i></a>
	<b>Bookmarks:</b><br>
	<div align="right">
		<a href="javascript:plotLongLat(-110.80681800842285, 19.308551284387825, 15)">volcano south of Cabo</a><br />
		<a href="javascript:plotLongLat(-5.603821277618408, 36.00924734317246, 16)">nice little harbor in Gibraltar</a><br />
		<a href="javascript:plotLongLat(-73.06646347045898, -36.795470938729835, 12)">Concepcion, Chile</a><br />
	</div>
	<img src="../images/working.gif" width="67" height="67" alt="" />
	in progress...
</div>


</body>
</html>
